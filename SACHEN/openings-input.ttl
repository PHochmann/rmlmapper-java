@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix schema: <http://schema.org/>.

@prefix ifcrml: <http://ifcrml.thisisnourl/ifcrml#>.
@prefix fno: <https://w3id.org/function/ontology#> .
@prefix fnom: <https://w3id.org/function/vocabulary/mapping#> .
@prefix fnoi: <https://w3id.org/function/vocabulary/implementation#> .
@prefix ex: <http://example.com#>.

@base <http://example.com/ns#>.

# PROBLEM DEFINITION BELOW  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ex:openingsFilter a fno:Function ;
    fno:expects ( ex:paramA ) .

ex:paramA a fno:Parameter;
    fno:predicate ex:wallID ;
    fno:type      xsd:string ;
    fno:required  "true"^^xsd:boolean .

ex:openingsFilterExecution
    a              fno:Execution ;
    fno:executes   ex:openingsFilter ;
    ex:wallID      "2O_M2UD93Vq00000000EGW"^^xsd:string .

ex:IFCFilters
    a                   fnoi:JavaClass ;
    #doap:download-page "GrelFunctions.jar" ;
    fnoi:class-name     "be.ugent.rml.functions.ExecutionParser" .

ex:openingsFilterMapping
    a                 fno:Mapping ;
    fno:implementation ex:IFCFilters ;
    fno:methodMapping [ a                fnom:StringMethodMapping ;
                        fnom:method-name "getOpeningsOfWall" ] .


# RML MAPPING BELOW  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<#IFCMapping> a rr:TriplesMap;
  rml:logicalSource [

    rml:source [
      rdf:type ifcrml:ifc ;
      ifcrml:serverLocation "http://localhost:8082" ;
      ifcrml:password "123456" ;
      ifcrml:username "admin@admin.com" ;
      ifcrml:path "SACHEN/test-openings.ifc" ;
      ifcrml:format "ifc2x3tc1"
    ];

    rml:referenceFormulation ifcrml:IFCAttribute ;

    #ifcrml:iterator """{
    #  "type": {
    #    "name": "IfcProduct",
    #    "includeAllSubTypes": "true"
    #  }
    #}"""

    ifcrml:iteratorMapping ex:openingsFilterMapping ;
    ifcrml:iteratorExecution ex:openingsFilterExecution
  ];

  rr:subjectMap [
    rr:template "http://example.com/{IfcType}/{GlobalId}";
  ];

  rr:predicateObjectMap [
    rr:predicate rdf:type;
    rr:objectMap [
        rr:template "https://standards.buildingsmart.org/IFC/DEV/IFC2x3/FINAL/OWL#{IfcType}"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate rdf:label;
    rr:objectMap [
        rml:reference "Name"
    ]
  ].

  